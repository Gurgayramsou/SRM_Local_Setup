<!-- <title>{{message}}</title> -->
<div *ngIf="!fullAccess" class="container-fluid">
  <div *ngIf="loadingSymbol" class="loader"></div>
  <div [ngClass]="{'overlay':loadingSymbol,'a':!loadingSymbol}">
    <div class="container-fluid bodyDiv">
      {{noAccessMessage}}
    </div>
  </div>
</div>

<div *ngIf='fullAccess' class="container-fluid">
  <div *ngIf="loadingSymbol" class="loader"></div>
  <div [ngClass]="{'overlay':loadingSymbol,'a':!loadingSymbol}">
    <div class="container-fluid bodyDiv">
      <!-- div for header -->
      <div class="row">
        <span>
          <h1>{{message}}</h1>
        </span>
      </div>
      <!-- div for create button -->
      <div class="row buttonPullRight">
        <div class="createButtonDiv" (click)="createScore(createScoreModal)">
          <div class="createButtonIconDiv">
            <img class="createButtonIcon" src="../../../../assets/images/create.png" alt="click here to open createScores">
          </div>
          <div class="createButtonValueDiv">
            Create Scores
          </div>
        </div>
      </div>
      <br />
      <!-- div for filter & grid -->
      <div class="row">
        <!-- div for filter -->
        <div class="col-sm-2 filteryDiv">
          <section class="mySection">
            <div class="row">
              <div class="col-md-7">
                <h2>Filters</h2>
              </div>
              <div *ngIf="enableClearAll" class="col-md-5 clearAll">
                <span (click)="clearAllFilter()">Clear all</span>
              </div>
            </div>
            <div class="row filtersheight">
              <div *ngFor="let fa of filteredArray; let i=index">
                <div class="filterSelectedValue" (click)="deleteFilter(fa)">
                  <div class="filterCrossIcon">✕</div>
                  <div class="filterCrossValue">{{fa.text}}</div>
                </div>
              </div>
              <!-- <div class="showMore">
                      <span>Show more</span>
                    </div> -->
            </div>
          </section>
          <section class="mySection">
            <div class="row filterHeaderFontWeight" (click)="togglePackageId()" data-toggle="collapse"
              data-target="#packageIdFilter">
              <div class="col-md-10">
                <label for="txtPackageId" class="labelpagingOptions">Package Id</label>
              </div>
              <div class="col-md-1">
                <div data-toggle="collapse" data-target="#packageIdFilter" *ngIf="!showPackageId">
                  <!-- <span class="arrowIcon glyphicon glyphicon-menu-right"></span> -->
                  <img class="arrowIcon" src="../../../assets/images/greaterArrow.svg" alt="click greaterArrow to open packageId filter">
                </div>
                <div data-toggle="collapse" data-target="#packageIdFilter" *ngIf="showPackageId">
                  <!-- <span class="arrowIcon glyphicon glyphicon-menu-down"></span> -->
                  <img class="arrowIcon" src="../../../assets/images/downArrow.svg" alt="click downArrow to open packageId filter">
                </div>
              </div>
            </div>
            <div class="row collapse" id="packageIdFilter">
              <div class="col-md-1"></div>
              <div class="col-md-11 filterData displayInlineBlock">
                <span class="displayInlineBlock">
                  <input id="txtPackageId" type="text" class="form-control searchInput" [ngbTypeahead]="search"
                    [(ngModel)]="selectedTransactionCode" (selectItem)="selectTransactionCode($event)" />
                </span>
                <span (click)="searchTransactionCode()" class="displayInlineBlock searchImage">
                  <img class="" src="../../../assets/images/search.png" alt="click here to open searchInput">
                </span>
              </div>
            </div>
          </section>
          <section class="mySection">
            <div class="row filterHeaderFontWeight" (click)="toggleTransactionDate()" data-toggle="collapse"
              data-target="#transactionDateFilter">
              <div class="col-md-10">
                <label for="txtDate" class="labelpagingOptions">Date</label>
              </div>
              <div class="col-md-1">
                <div data-toggle="collapse" data-target="#transactionDateFilter" *ngIf="!showTransactionDate">
                  <img class="arrowIcon" src="../../../assets/images/greaterArrow.svg"  alt="click greaterArrow to open Date filter">
                </div>
                <div data-toggle="collapse" data-target="#transactionDateFilter" *ngIf="showTransactionDate">
                  <img class="arrowIcon" src="../../../assets/images/downArrow.svg" alt="click downArrow to open Date filter">
                </div>
              </div>
            </div>
            <div class="row collapse" id="transactionDateFilter">
              <div class="col-md-1"></div>
              <div class="col-md-11 filterData displayInlineBlock">
                <span class="displayInlineBlock">
                  <input id="txtDate" class="form-control dateInput" placeholder="yyyy-mm-dd" type="text" name="dpdate"
                    readonly="readonly" [(ngModel)]="selectedTransactionDate" ngbDatepicker
                    [footerTemplate]="footerTemplateDate" outsideDays="collapsed" #date="ngbDatepicker"
                    (dateSelect)="selectTransactionDate($event)">
                  <ng-template #footerTemplateDate>
                    <hr class="my-0">
                    <button class="btn btn-sm m-2 float-left"
                      (click)="selectedTransactionDate = selectedTransactionDateToday; date.close();selectTransactionDate(selectedTransactionDate)">Today</button>
                    <button class="btn btn-secondary btn-sm m-2 float-right" (click)="date.close()">Close</button>
                  </ng-template>
                </span>
                <span class="displayInlineBlock dateImage">
                  <img class="displayInlineBlock dateIcon" (click)="date.toggle()"
                    src="../../../../assets/images/calendar.png" alt="click here to open dateIcon">
                </span>
              </div>
            </div>
          </section>
          <section class="mySection">
            <div class="row filterHeaderFontWeight" (click)="toggleMonthYear()" data-toggle="collapse"
              data-target="#monthYearFilter">
              <div class="col-md-10 ">
                Month Year
              </div>
              <div class="col-md-1">
                <div data-toggle="collapse" data-target="#monthYearFilter" *ngIf="!showMonthYear">
                  <img class="arrowIcon" src="../../../assets/images/greaterArrow.svg" alt="click greaterArrow to open Month Year filter">
                </div>
                <div data-toggle="collapse" data-target="#monthYearFilter" *ngIf="showMonthYear">
                  <img class="arrowIcon" src="../../../assets/images/downArrow.svg" alt="click downArrow to open Month Year filter">
                </div>
              </div>
            </div>
            <div class="row collapse" id="monthYearFilter">
              <div class="col-md-1"></div>
              <div class="col-md-11 filterData">
                <div class="filterDataheight">
                  <div *ngFor="let monthYear of monthYearDetails | slice:0:monthYearCount; let i=index"
                    class="checkbox checkbox-primary checkbox-inline">
                    <input type="checkbox" [value]="monthYear.MonthYearId" [name]="monthYear.MonthYearNm"
                      id="{{monthYear.MonthYearNm}}" [(ngModel)]="monthYear.selected"
                      (change)="selectMonthYear(monthYear)" />
                    <label for="{{monthYear.MonthYearNm}}"> {{monthYear.MonthYearNm}} </label>
                  </div>
                </div>
                <div *ngIf="monthYearDetails?.length > filterCount">
                  <span class="showMore" (click)="displayMoreMonthYear()">{{showMoreMonthYear}}</span>
                </div>
              </div>
            </div>
          </section>
          <section class="mySection">
            <div class="row filterHeaderFontWeight" (click)="togglePackageType()" data-toggle="collapse"
              data-target="#packageTypeFilter">
              <div class="col-md-10">
                Package Type
              </div>
              <div class="col-md-1">
                <div data-toggle="collapse" data-target="#packageTypeFilter" *ngIf="!showPackageType">
                  <!-- &#9658; -->
                  <img class="arrowIcon" src="../../../assets/images/greaterArrow.svg" alt="click greaterArrow to open Package Type filter">
                </div>
                <div data-toggle="collapse" data-target="#packageTypeFilter" *ngIf="showPackageType">
                  <!-- &#9660; -->
                  <img class="arrowIcon" src="../../../assets/images/downArrow.svg" alt="click downArrow to open Package Type filter">
                </div>
              </div>
            </div>
            <div class="row collapse" id="packageTypeFilter">
              <div class="col-md-1"></div>
              <div class="col-md-11 filterData">
                <div class="filterDataheight">
                  <div *ngFor="let package of packageDetails | slice:0:packageTypeCount; let i=index"
                    class="checkbox checkbox-primary checkbox-inline">
                    <input type="checkbox" [value]="package.packageId" name="{{package.packageName}}"
                      id="{{package.packageId}}" [(ngModel)]="package.selected" (change)="selectPackageType(package)" />
                    <label for="{{package.packageId}}"> {{package.packageName}} </label>
                  </div>
                </div>
                <div *ngIf="packageDetails?.length > filterCount">
                  <span class="showMore" (click)="displayMorePackageType()">{{showMorePackageType}}</span>
                </div>
              </div>
            </div>
          </section>
          <section class="mySection">
            <div class="row filterHeaderFontWeight" (click)="toggleFacility()" data-toggle="collapse"
              data-target="#facilityFilter">
              <div class="col-md-10 ">
                Site
              </div>
              <div class="col-md-1">
                <div data-toggle="collapse" data-target="#facilityFilter" *ngIf="!showFacility">
                  <img class="arrowIcon" src="../../../assets/images/greaterArrow.svg" alt="click greaterArrow to open Site filter">
                </div>
                <div data-toggle="collapse" data-target="#facilityFilter" *ngIf="showFacility">
                  <img class="arrowIcon" src="../../../assets/images/downArrow.svg" alt="click downArrow to open Site filter">
                </div>
              </div>
            </div>
            <div class="row collapse" id="facilityFilter">
              <div class="col-md-1"></div>
              <div class="col-md-11 filterData">
                <div class="filterDataheight">
                  <div *ngFor="let facility of facilityDetails | slice:0:facilityCount; let i=index"
                    class="checkbox checkbox-primary checkbox-inline">
                    <input type="checkbox" [value]="facility.facilityId" [name]="facility.facilityName"
                      id="{{facility.facilityName}}" [(ngModel)]="facility.selected"
                      (change)="selectFacility(facility)" />
                    <label for="{{facility.facilityName}}"> {{facility.facilityName}} </label>
                  </div>
                </div>
                <div *ngIf="facilityDetails?.length > filterCount">
                  <span class="showMore" (click)="displayMoreFacility()">{{showMoreFacility}}</span>
                </div>
              </div>
            </div>
          </section>
          <section class="mySection">
            <div class="row filterHeaderFontWeight" (click)="toggleVendor()" data-toggle="collapse"
              data-target="#vendor">
              <div class="col-md-10">
                Vendor
              </div>
              <div class="col-md-1">
                <div data-toggle="collapse" data-target="#vendor" *ngIf="!showVendor">
                  <img class="arrowIcon" src="../../../assets/images/greaterArrow.svg" alt="click greaterArrow to open Vendor filter">
                </div>
                <div data-toggle="collapse" data-target="#vendor" *ngIf="showVendor">
                  <img class="arrowIcon" src="../../../assets/images/downArrow.svg" alt="click downArrow to open Vendor filter">
                </div>
              </div>
            </div>
            <div class="row collapse" id="vendor">
              <div class="col-md-1"></div>
              <div class="col-md-11 filterData">
                <div class="filterDataheight">
                  <div *ngFor="let vendor of vendorDetails | slice:0:vendorCount ; let i=index"
                    class="checkbox checkbox-primary checkbox-inline">
                    <input type="checkbox" [value]="vendor.vendorId" [name]="vendor.vendorName"
                      id="{{vendor.vendorName}}" [(ngModel)]="vendor.selected" (change)="selectVendor(vendor)" />
                    <label for="{{vendor.vendorName}}"> {{vendor.vendorName}} </label>
                  </div>
                </div>
                <div *ngIf="vendorDetails?.length > filterCount">
                  <span class="showMore" (click)="displayMoreVendor()">{{showMoreVendor}}</span>
                </div>
              </div>
            </div>
          </section>
          <section class="mySection">
            <div class="row filterHeaderFontWeight" (click)="toggleStatus()" data-toggle="collapse"
              data-target="#status">
              <div class="col-md-10">
                Status
              </div>
              <div class="col-md-1">
                <div data-toggle="collapse" data-target="#status" *ngIf="!showStatus">
                  <img class="arrowIcon" src="../../../assets/images/greaterArrow.svg" alt="click greaterArrow to open Status filter">
                </div>
                <div data-toggle="collapse" data-target="#status" *ngIf="showStatus">
                  <img class="arrowIcon" src="../../../assets/images/downArrow.svg" alt="click downArrow to open Status filter">
                </div>
              </div>
            </div>
            <div class="row collapse" id="status">
              <div class="col-md-1"></div>
              <div class="col-md-11 filterData">
                <div class="filterDataheight">
                  <div *ngFor="let status of statusDetails| slice:0:statusCount ; let i=index"
                    class="checkbox checkbox-primary checkbox-inline">
                    <input type="checkbox" [value]="status.statusId" [name]="status.statusName"
                      id="{{status.statusName}}" [(ngModel)]="status.selected" (change)="selectStatus(status)" />
                    <label for="{{status.statusName}}"> {{status.statusName}} </label>
                  </div>
                </div>
                <div *ngIf="statusDetails?.length > filterCount">
                  <span class="showMore" (click)="displayMoreStatus()">{{showMoreStatus}}</span>
                </div>
              </div>
            </div>
          </section>
          <!-- <section class="mySection">
                  <div class="row filterHeaderFontWeight" (click)="toggleFrequency()" data-toggle="collapse"
                    data-target="#frequency">
                    <div class="col-md-10">
                      Frequency
                    </div>
                    <div class="col-md-1">
                      <div data-toggle="collapse" data-target="#frequency" *ngIf="!showFrequency">
                        <img class="arrowIcon" src="../../../assets/images/greaterArrow.svg">
                      </div>
                      <div data-toggle="collapse" data-target="#frequency" *ngIf="showFrequency">
                        <img class="arrowIcon" src="../../../assets/images/downArrow.svg">
                      </div>
                    </div>
                  </div>
                  <div class="row collapse" id="frequency">
                    <div class="col-md-1"></div>
                    <div class="col-md-11 filterData">
                      <div class="filterDataheight">
                        <div *ngFor="let frequency of frequencyDetails| slice:0:frequencyCount ; let i=index"
                          class="checkbox checkbox-primary checkbox-inline">
                          <input type="checkbox" [value]="frequency.frequencyId" [name]="frequency.frequencyName"
                            id="{{frequency.frequencyName}}" [(ngModel)]="frequency.selected"
                            (change)="selectFrequency(frequency)" />
                          <label for="{{frequency.frequencyName}}"> {{frequency.frequencyName}} </label>
                        </div>
                      </div>
                      <div *ngIf="frequencyDetails?.length > filterCount">
                        <span class="showMore" (click)="displayMoreFrequency()">{{showMoreFrequency}}</span>
                      </div>
                    </div>
                  </div>
                </section> -->
        </div>
        <!-- div for grid -->
        <div class="col-sm-10">
          <ul class="nav nav-tabs">
            <li [ngClass]="{ 'active': isActiveRole == 'Ops' ? true : false }"><a id="all"
                (click)="roleWiseView($event)">Ops</a></li>
            <li [ngClass]="{ 'active': isActiveRole == 'My Submission(s)' ? true : false }"><a id="withjll"
                (click)="roleWiseView($event)">My Submission(s)</a></li>
          </ul>
          <br />
          <div class="row gridDiv horizontalscroll">
            <table class="table table-striped table-hover ">
              <thead class="table-header">
                <!-- thead-inverse -->
                <tr>
                  <th class="cansort textnowrap" (click)="sorting('TransactionRefNo')">PACKAGE ID
                    <span *ngIf="sortColumn == 'TransactionRefNo' && sortDirection == 'asc'">▲</span>
                    <span *ngIf="sortColumn == 'TransactionRefNo' && sortDirection == 'desc'">▼</span>
                  </th>
                  <th class="textnowrap">PACKAGE TYPE</th>
                  <th class="textnowrap">SITE</th>
                  <th class="textnowrap">VENDOR</th>
                  <th class="cansort textnowrap" (click)="sorting('TransactionDt')">PERIOD DATE
                    <span
                      *ngIf="defaultSort == false && sortColumn == 'TransactionDt' && sortDirection == 'asc'">▲</span>
                    <span
                      *ngIf="defaultSort == false && sortColumn == 'TransactionDt' && sortDirection == 'desc'">▼</span>
                  </th>
                  <th class="cansort textnowrap" (click)="sorting('StatusNm')">STATUS
                    <span *ngIf="sortColumn == 'StatusNm' && sortDirection == 'asc'">▲</span>
                    <span *ngIf="sortColumn == 'StatusNm' && sortDirection == 'desc'">▼</span>
                  </th>
                  <th class="cansort textnowrap" (click)="sorting('UpdatedBy')">MODIFIED BY
                    <span *ngIf="sortColumn == 'UpdatedBy' && sortDirection == 'asc'">▲</span>
                    <span *ngIf="sortColumn == 'UpdatedBy' && sortDirection == 'desc'">▼</span>
                  </th>
                  <th class="cansort textnowrap" (click)="sorting('UpdatedDttm')">MODIFIED ON
                    <span *ngIf="sortColumn == 'UpdatedDttm' && sortDirection == 'asc'">▲</span>
                    <span *ngIf="sortColumn == 'UpdatedDttm' && sortDirection == 'desc'">▼</span>
                  </th>
                  <th>EDIT</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngIf="userData1?.length<=0">
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td class="textnowrap">No Records found</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <ng-container *ngIf="userData1?.length>0">
                  <tr *ngFor="let item of userData1">
                    <td class="textnowrap">
                      <span *ngIf ="item.StatusNm != 'Draft'" class="spanlink" (click)="viewScore(viewScoreModal,item)">{{item.TransactionRefNo}}</span>
                      <span *ngIf ="item.StatusNm == 'Draft'">{{item.TransactionRefNo}}</span>
                      <img class="infoIcon" (click)="approvalFlow(approvalFlowModel,item)" title="Approval Details" alt="Approval Details"
                        src="../../../../assets/images/info.png">
                    </td>
                    <td class="textnowrap">{{item.packageName}}</td>
                    <td class="textnowrap">{{item.facilityName}}</td>
                    <td class="textnowrap">{{item.vendorName}}</td>
                    <td class="textnowrap">{{item.TransactionDt | date : "dd-MMM-yyyy"}}</td>
                    <td class="textnowrap" [ngClass]="item.Status">{{item.StatusNm}}</td>
                    <td class="textnowrap">{{item.UpdatedBy}}</td>
                    <td class="textnowrap">{{item.UpdatedDttm | date : "dd-MMM-yyyy"}}</td>
                    <td>
                      <span *ngIf="item.IsEditable == 1" class="editIcon glyphicon glyphicon-pencil"
                       (click)="editScore(createScoreModal,item)">
                      </span>
                      <span *ngIf="item.IsEditable == 0" class="editIcon disabledEditIcon glyphicon glyphicon-pencil"
                      (click)="editScore(createScoreModal,item)">
                      </span>
                    </td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
          <br />
          <div *ngIf="userData1?.length>0" class="row gridDiv showPageDiv table-footer">
            <div class="col-sm-5 pagination">
              <ul *ngIf="pager.pages && pager.pages.length" class="pagination" id="paginationtab">
                <li [ngClass]="{disabled:pager.currentPage === 1}">
                  <a (click)="setPage(1)">
                    <<</a> </li> <li [ngClass]="{disabled:pager.currentPage === 1}">
                      <a (click)="setPage(pager.currentPage - 1)">
                        <</a> </li> <li *ngFor="let page of pager.pages"
                          [ngClass]="{active:pager.currentPage === page}">
                          <a (click)="setPage(page)">{{page}}</a>
                </li>
                <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                  <a (click)="setPage(pager.currentPage + 1)">></a>
                </li>
                <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                  <a (click)="setPage(pager.totalPages)">>></a>
                </li>
              </ul>
            </div>
            <div class="col-sm-5 pagingOptions">
              <label for="ddlPageItems" class="labelpagingOptions">Show</label>&nbsp; 
              <select id="ddlPageItems" class="optionddl"  [ngModel]="selectedPageSize"  (ngModelChange)="onPagingOptionsChange($event)">
                <option [value]="i" *ngFor="let i of pageOptions">{{i}}</option>
              </select>&nbsp;
              entries
            </div>
            <div class="col-sm-2 textnowrap">
              <span class="pagerecordcount">{{pager.startIndex + 1}} - {{this.pager.endIndex + 1}} of
                {{pager.totalItems}} records </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<!-- Modal pop up for Creatig/Editing Score -->
<ng-template #createScoreModal let-modal>
  <!-- Modal Header -->
  <div class="modal-header">
    <span class="modal-title">{{createEditScoreHeader}}</span>
    <!-- <img class="closebutton" (click)="dismissCreateScoreModal()" src="../../../../assets/images/close.png"> -->
    <span class="closebutton glyphicon glyphicon-remove" (click)="dismissCreateScoreModal()"></span>
  </div>

  <!-- Modal body -->
  <div *ngIf="loadingSymbolForCreateModal" class="loader"></div>
  <div [ngClass]="{'overlay':loadingSymbolForCreateModal,'a':!loadingSymbolForCreateModal}">
    <div class="modal-body">
      <div class="row alignitemcenter">
        <div class="col-md-2 textnowrap">
          
          <label for="ddlPackageType">Package Type <span class="redColour">*</span></label>
        </div>
        <div class="col-md-4">
           
          <select id="ddlPackageType" [ngClass]="{ 'disabled': isCreate == true ? false : true }" [(ngModel)]='packageTypeId'
            (change)='packageChange()'>
            <option class='option' value="-1" *ngIf="isCreate">Select</option>
            <option class='option' *ngFor='let packageType of createPackageTypeDetails' [value]="packageType.packageId">
              {{packageType.packageName}}</option>
          </select>
        </div>
        <div class="col-md-2 textnowrap">
          
          <label for="ddlFacility">Site <span class="redColour">*</span></label>
        </div>
        <div class="col-md-4">
            
          <select id="ddlFacility" [ngClass]="{ 'disabled': isCreate == true ? false : true }" [(ngModel)]='facilityId'
            (change)='facilityChange()'>
            <option class='option' value="-1">Select</option>
            <option class='option' *ngFor='let facility of createFacilityDetails' [value]="facility.facilityId">
              {{facility.facilityName}}</option>
          </select>
        </div>
      </div>
      <br />
      <br />
      <div class="row alignitemcenter">
        <div class="col-md-2 textnowrap">
         
          <label for="ddlVendorName"> Vendor Name <span class="redColour">*</span></label>
        </div>
        <div class="col-md-4">
            
          <select id="ddlVendorName" [ngClass]="{ 'disabled': isCreate == true ? false : true }" [(ngModel)]='vendorId'
            (change)='vendorChange()'>
            <option class='option' value="-1">Select</option>
            <option class='option' *ngFor='let vendor of createVendorDetails' [value]="vendor.vendorId">
              {{vendor.vendorName}}</option>
          </select>
        </div>
        <div class="col-md-2 textnowrap">
         
          <label for="ddlPeriodPicker"> Period Picker <span class="redColour">*</span></label>
        </div>
        <div class="col-md-4">
            
          <!-- <input [ngClass]="{ 'disabled': isCreate == true ? false : true }" type="date" [(ngModel)]='periodDate'> -->
          <select id="ddlPeriodPicker" [ngClass]="{ 'disabled': isCreate == true ? false : true }" [(ngModel)]='periodDateId' (change)='perioPickerChange()'>
            <option class='option' value="-1">Select</option>
            <option class='option' *ngFor="let periodDate of periodDateDropDown" [value]="periodDate">
              {{periodDate | date : "dd-MMM-yyyy"}}</option>
          </select>
        </div>

      </div>
      <br />
      <br />
      <div class="row alignitemcenter">
        <div class="col-md-7">
            <span *ngIf="txtFrequencyDetail!=''">Frequency : <span style="color: blue">{{txtFrequencyDetail}}</span></span>
        </div>
        <div class="col-md-2">
          <button [ngClass]="{ 'disabled': isCreate == true ? false : true }" (click)="addScore()" type="button"
            class="btn">Select</button>
        </div>  1`
        <div class="col-md-2 buttonmarginleft">
          <button [ngClass]="{ 'disabled': isCreate == true ? false : true }" type="button" class="btn"
            (click)="cancelSelection()">Clear</button>
        </div>
        <div class="col-md-1">
        </div>
      </div>
      <br />
      <div class="row modalgridDiv validationHeader" *ngIf="existingTransactionMessageAlert!=''">
        <span>ScoreCard <span class="boldText">{{existingTransactionMessageAlert}}</span> is already created for above selection.</span>
      </div>
      <ul *ngIf="editFrequencyDetails?.length>0" class="nav nav-tabs navpopup">
        <li [ngClass]="{ 'active': activeFrequency == frequency.frequencyName ? true : false }"
          *ngFor="let frequency of editFrequencyDetails; let i=index">
          <a id={{frequency.frequencyId}} (click)="frequencyWiseScore($event)">{{frequency.frequencyName}}</a></li>
      </ul>
      <br />
      <div *ngIf="editScoreData?.length>0" class="row modalgridDiv">
        <table class="table table-striped table-hover ">
          <thead class="table-header">
            <tr>
              <th>Function</th>
              <th>OLA</th>
              <th>Met</th>
              <th>Not Met</th>
              <th>NA</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngIf="editScoreData?.length<=0">
              <td></td>
              <td></td>
              <td>No Records found</td>
              <td></td>
              <td></td>
            </tr>
            <ng-container *ngIf="editScoreData?.length>0">
              <tr *ngFor="let item of editScoreData; let i=index">
                <td class="FunctionWidth">{{item.FunctionNm}}</td>
                <td class="OLAWidth">{{item.OLANm}}</td>
                <td class="textnowrap">
                  <div class="radio radio-primary radio-inline">
                    <input type="radio" id={{i}}met name={{i}}radioInline [(ngModel)]=item.RatingNm value="Met"
                      (change)="optionalOLA(item)" disableKeyboardKey>
                    <label for={{i}}met><span class="screenreader">MET</span></label>
                  </div>
                </td>
                <td class="textnowrap">
                  <div class="radio radio-primary radio-inline">
                    <input type="radio" id={{i}}notmet name={{i}}radioInline1 [(ngModel)]=item.RatingNm value="Not Met"
                      (change)="optionalOLA(item)" disableKeyboardKey>
                    <label for={{i}}notmet><span class="screenreader">NOTMET</span></label>
                  </div>
                </td>
                <td class="textnowrap">
                  <div class="radio radio-primary radio-inline"
                    [ngClass]="{ 'disabled': item.IsOptional == 0 ? true : false }">
                    <!-- <div class="radio radio-primary radio-inline"  [ngClass]="{ 'disabled': item.IsOptional == 0 ? true : false }"> -->
                    <input type="radio" id={{i}}na name={{i}}radioInline2 [(ngModel)]=item.RatingNm value="NA"
                      (change)="optionalOLA(item)" disableKeyboardKey>
                    <label for={{i}}na><span class="screenreader">NA</span></label>
                  </div>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
      <br />
      <div class="row" *ngIf="editScoreData?.length>0">
        <div class="col-md-5">

        </div>
        <div class="col-md-2">
          <button *ngIf ="ShowSaveButton"
             type="button" class="btn" (click)="saveScore()">Save</button>
        </div>
        <div class="col-md-2">
          <button type="button" class="btn" (click)="clearScore()">Clear</button>
        </div>
        <div class="col-md-3">
          <button type="button" class="btn" (click)="redirectSubmitPage(submitScoreModal)">Generate Score</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!-- Modal pop up for Submitting Score -->
<ng-template #submitScoreModal let-modal>
  <!-- Modal Header -->
  <div class="modal-header">
    <span class="modal-title">Submit Score: {{transactionRefNo}}</span>
    <!-- <span>
      <img class="backbutton" (click)="backtoCreateScoreModal(createScoreModal)"
        src="../../../../assets/images/back.png">
      <img class="closebutton" (click)="dismissCreateScoreModal()" src="../../../../assets/images/close.png">
    </span> -->
    <span>
      <!-- <span class="backbutton glyphicon glyphicon-arrow-left" (click)="backtoCreateScoreModal(createScoreModal)"></span> -->
      <span class="closebutton glyphicon glyphicon-remove" (click)="dismissCreateScoreModal()"></span>
    </span>      
  </div>

  <!-- Modal body -->  <div *ngIf="loadingSymbolForSubmitModal" class="loader"></div>
  <div [ngClass]="{'overlay':loadingSymbolForSubmitModal,'a':!loadingSymbolForSubmitModal}">
    <div class="modal-body">
      <div *ngIf="submitScoreDataDisplay?.length>0" class="row modalgridDiv">
        <span class="scoreHeader">Function OLA Score</span>
        <table class="table table-striped table-hover ">
          <thead class="table-header">
            <tr>
              <th class="cansort" (click)="sortingSubmit('FunctionNm')">Function
                <span
                  *ngIf="defaultSortSubmit == false && sortColumnSubmit == 'FunctionNm' && sortDirectionSubmit == 'asc'">▲</span>
                <span
                  *ngIf="defaultSortSubmit == false && sortColumnSubmit == 'FunctionNm' && sortDirectionSubmit == 'desc'">▼</span>
              </th>
              <th class="cansort" (click)="sortingSubmit('frequencyName')">Frequency
                <span *ngIf="sortColumnSubmit == 'frequencyName' && sortDirectionSubmit == 'asc'">▲</span>
                <span *ngIf="sortColumnSubmit == 'frequencyName' && sortDirectionSubmit == 'desc'">▼</span>
              </th>
              <th class="cansort" (click)="sortingSubmit('OLANm')">OLA
                <span *ngIf="sortColumnSubmit == 'OLANm' && sortDirectionSubmit == 'asc'">▲</span>
                <span *ngIf="sortColumnSubmit == 'OLANm' && sortDirectionSubmit == 'desc'">▼</span>
              </th>
              <th>Met</th>
              <th>Not Met</th>
              <th>NA</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngIf="submitScoreDataDisplay?.length<=0">
              <td></td>
              <td></td>
              <td></td>
              <td>No Records found</td>
              <td></td>
              <td></td>
            </tr>
            <ng-container *ngIf="submitScoreDataDisplay?.length>0">
              <tr *ngFor="let item of submitScoreDataDisplay; let i=index">
                <td class="FunctionWidth">{{item.FunctionNm}}</td>
                <td>{{item.frequencyName}}</td>
                <td class="OLAWidth">{{item.OLANm}}</td>
                <td class="textnowrap">
                  <div class="radio radio-primary radio-inline disabled">
                    <input type="radio" id={{i}}met name={{i}}radioInline [(ngModel)]=item.RatingNm value="Met" disableKeyboardKey>
                    <label for={{i}}met><span class="screenreader">MET</span></label>
                  </div>
                </td>
                <td class="textnowrap">
                  <div class="radio radio-primary radio-inline disabled">
                    <input type="radio" id={{i}}notmet name={{i}}radioInline1 [(ngModel)]=item.RatingNm value="Not Met" disableKeyboardKey>
                    <label for={{i}}notmet><span class="screenreader">NOTMET</span></label>
                  </div>
                </td>
                <td class="textnowrap">
                  <div class="radio radio-primary radio-inline disabled">
                    <input type="radio" id={{i}}na name={{i}}radioInline2 [(ngModel)]=item.RatingNm value="NA" disableKeyboardKey>
                    <label for={{i}}na><span class="screenreader">NA</span></label>
                  </div>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
      <div *ngIf="submitScoreDataDisplay?.length>0" class="row modalgridDiv showPageDiv table-footer">
        <div class="col-sm-5 pagination">
          <ul *ngIf="pagerSubmit.pages && pagerSubmit.pages.length" class="pagination" id="submitpaginationtab">
            <li [ngClass]="{disabled:pagerSubmit.currentPage === 1}">
              <a (click)="setPageSubmit(1)">
                <<</a> </li> <li [ngClass]="{disabled:pagerSubmit.currentPage === 1}">
                  <a (click)="setPageSubmit(pagerSubmit.currentPage - 1)">
                    <</a> </li> <li *ngFor="let page of pagerSubmit.pages"
                      [ngClass]="{active:pagerSubmit.currentPage === page}">
                      <a (click)="setPageSubmit(page)">{{page}}</a>
            </li>
            <li [ngClass]="{disabled:pagerSubmit.currentPage === pagerSubmit.totalPages}">
              <a (click)="setPageSubmit(pagerSubmit.currentPage + 1)">></a>
            </li>
            <li [ngClass]="{disabled:pagerSubmit.currentPage === pagerSubmit.totalPages}">
              <a (click)="setPageSubmit(pagerSubmit.totalPages)">>></a>
            </li>
          </ul>
        </div>
        <div class="col-sm-5 pagingOptions">
          <label for="submitddlPageItems" class="labelpagingOptions">Show</label>&nbsp;  
          <select id="submitddlPageItems" class="optionddl"  [ngModel]="selectedPageSizeSubmit"
             (ngModelChange)="onPagingOptionsChangeSubmit($event)">
            <option [value]="i" *ngFor="let i of pageOptionsSubmit">{{i}}</option>
          </select>&nbsp;
          entries
        </div>
        <div class="col-sm-2 textnowrap">
          <span class="pagerecordcount">{{pagerSubmit.startIndex + 1}} - {{pagerSubmit.endIndex + 1}} of
            {{pagerSubmit.totalItems}} records </span>
        </div>
      </div>
      <br />
      <br />
      <div *ngIf="scoreCard?.length>0">
        <div class="row modalgridDiv alignitemcenter">
          <span>
            <img class="plusIcon" (click)="toggleKPIScoreCard()" data-toggle="collapse" data-target="#KPIScoreCard"
              *ngIf="!showKPIScoreCard" src="../../../../assets/images/plus.png" alt="click here to open plusIcon">
            <img class="plusIcon" (click)="toggleKPIScoreCard()" data-toggle="collapse" data-target="#KPIScoreCard"
              *ngIf="showKPIScoreCard" src="../../../../assets/images/minus.png" alt="click here to open plusIcon">
          </span>&nbsp;
          <span class="scoreHeader">KPI Score Card</span>
        </div>
        <div class="row collapse modalgridDiv" id="KPIScoreCard">
          <table class="table table-striped table-hover ">
            <thead class="table-header">
              <tr>
                <th>Balanced ScoreCard Criteria</th>
                <th>Weight</th>
                <th>Actual Score</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngIf="scoreCard?.length<=0">
                <td></td>
                <td>No Records found</td>
                <td></td>
              </tr>
              <ng-container *ngIf="scoreCard?.length>0">
                <tr *ngFor="let item of scoreCard; let i=index">
                  <td>{{item.FunctionNm}}</td>
                  <td>{{item.Weightage | number : '1.0-2'}}</td>
                  <td>{{item.Score | number : '1.2-2'}}</td>
                </tr>
                <tr>
                  <td colspan="2">Maximum Score</td>
                  <td>5.00</td>
                </tr>
                <tr>
                  <td colspan="2">Total Weightage Score Achieved</td>
                  <td>{{TotalWeightageScore | number : '1.2-2'}}</td>
                </tr>
                <tr>
                  <td colspan="2">Percentage Score (%)</td>
                  <td>{{TotalWeightageScore/5*100 | number : '1.2-2'}} %</td>
                </tr>
                <tr>
                  <td colspan="2">Penalty applicable for the period</td>
                  <td>{{penalty | number : '1.2-2'}} <span>%</span></td>
                </tr>
              </ng-container>
            </tbody>
          </table>
          <br>
          <div *ngIf="penaltyStructure?.length>0">
            <table class="table table-striped table-hover ">
              <thead class="table-header">
                <tr>
                  <th class="cansort">Total Weightage Score Achieved
                  </th>
                  <th class="cansort">Penalty
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngIf="penaltyStructure?.length<=0">
                  <td></td>
                  <td>No Records found</td>
                </tr>
                <ng-container *ngIf="penaltyStructure?.length>0">
                  <tr *ngFor="let item of penaltyStructure">
                    <td>{{item.MinScore | number : '1.2-2'}} to {{item.MaxScore}}</td>
                    <td>{{item.PenaltyDesc}}</td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <br />
      <br />
      <div *ngIf="WCCertificate?.length>0">
        <div class="row modalgridDiv alignitemcenter">
          <span>
            <img class="plusIcon" (click)="toggleWC()" data-toggle="collapse" data-target="#WC" *ngIf="!showWC"
              src="../../../../assets/images/plus.png" alt="click here to open plusIcon">
            <img class="plusIcon" (click)="toggleWC()" data-toggle="collapse" data-target="#WC" *ngIf="showWC"
              src="../../../../assets/images/minus.png" alt="click here to open plusIcon">
          </span>&nbsp;
          <span class="scoreHeader">Work Completion</span>
        </div>
        <div class="row collapse modalgridDiv horizontalscroll" id="WC">
          <table class="table table-striped table-hover ">
            <thead class="table-header">
              <tr>
                <th colspan="4">Work Completion Certificate</th>
                <th colspan="1"><span class="redColour">WCC</span></th>
              </tr>
              <tr>
                <th>Cleaning Type</th>
                <th>Target Sqft</th>
                <th>Sqft Achieved</th>
                <th>Unit Price</th>
                <th>Total Price</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of WCCertificate; let i=index">
                <td>{{item.CleaningType}}</td>
                <td>{{item.TargetSqft | number : '1.2-2'}}</td>
                <td>{{item.SqftAchieved | number : '1.2-2'}}</td>
                <td>{{item.UnitPrice | number : '1.3-3'}}</td>
                <td>{{item.TotalPrice | number : '1.3-3'}}</td>
              </tr>
            </tbody>
          </table>
          <br />
         <!-- <table class="table table-striped table-hover ">
            <thead class="table-header">
              <tr>
                <th *ngFor='let key of WCFacilityWiseKeys'>{{key}}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngIf="WCFacilityWise?.length<=0">
                <td></td>
                <td>No Records found</td>
                <td></td>
              </tr>
              <ng-container *ngIf="WCFacilityWise?.length>0">
                <tr *ngFor='let item of WCFacilityWise'>
                  <td *ngFor='let key of WCFacilityWiseKeys'>{{item[key]}}</td>
                </tr>
              </ng-container>
            </tbody>
          </table> 
          <div class="horizontalscroll" *ngFor="let wc of EditWCFacilityTowerWise; let i=index">
            <br />
            <table class="table table-striped table-hover">
              <thead class="table-header">
                <tr>
                  <th colspan="9">Tower {{wc.TowerNm}} - Carpet Cleaning Summary</th>
                  <th colspan="1"></th>
                  <th></th>
                </tr>
                <tr>
                  <th rowspan="5">Tower</th>
                  <th rowspan="5">Floor</th>
                  <th rowspan="5">High Traffic Sqft Area 20%</th>
                  <th rowspan="5">Low Traffic Sqft Area 80%</th>
                  <th>Frequency</th>
                  <td>Daily</td>
                  <td>Weekly</td>
                  <td>Quarterly</td>
                  <td class="textnowrap">Half Yearly</td>
                  <td class="textnowrap">Half Yearly</td>
                  <td>Yearly</td>
                </tr>
                <tr>
                  <th>Traffic</th>
                  <td>High</td>
                  <td>Low</td>
                  <td>High</td>
                  <td>Low</td>
                  <td>High</td>
                  <td>Low</td>
                </tr>
                <tr>
                  <th class="textnowrap">Cleaning Type</th>
                  <td>Vaccuming</td>
                  <td>Vaccuming</td>
                  <td>Encapulisation</td>
                  <td>Encapulisation</td>
                  <td class="textnowrap">Hot Water Extraction</td>
                  <td class="textnowrap">Hot Water Extraction</td>
                </tr>
                <tr>
                  <th>Percentage</th>
                  <td>20%</td>
                  <td>80%</td>
                  <td>20%</td>
                  <td>80%</td>
                  <td>20%</td>
                  <td>80%</td>
                </tr>
                <tr>
                  <th class="textnowrap">Monthly Target</th>
                  <td>{{wc.HighVaccumingTarget | number : '1.2-2'}}</td>
                  <td>{{wc.LowVaccumingTarget | number : '1.2-2'}}</td>
                  <td>{{wc.HighEncapulisationTarget | number : '1.2-2'}}</td>
                  <td>{{wc.LowEncapulisationTarget | number : '1.2-2'}}</td>
                  <td>{{wc.HighHotWaterExtractionTarget | number : '1.2-2'}}</td>
                  <td>{{wc.LowHotWaterExtractionTarget | number : '1.2-2'}}</td>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of wc.TowerDetails; let i=index">
                  <td>{{item.TOWERNm}}</td>
                  <td>{{item.FloorNm}}</td>
                  <td>{{item.High}}</td>
                  <td>{{item.Low}}</td>
                  <td>{{item.Area}}</td>
                  <td>{{item.HighVaccuming}}</td>
                  <td>{{item.LowVaccuming}}</td>
                  <td>{{item.HighEncapulisation}}</td>
                  <td>{{item.LowEncapulisation}}</td>
                  <td>{{item.HighHotWaterExtraction}}</td>
                  <td>{{item.LowHotWaterExtraction}}</td>
                </tr>
              </tbody>
            </table>
          </div>  -->
        </div>
      </div>
      <br />
      <br />
      <div class="row">
        <div class="col-md-2">
          Comments <span class="redColour">*</span>
        </div>
        <div class="col-md-10">
          <textarea [(ngModel)]="comments" maxlength="500" rows="2" cols="60" title="Comments"></textarea>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-2 textnowrap">
          Upload Artefacts
        </div>
        <div class="col-md-10">
          <input style="width: 200px;" type="file" (change)="selectFile($event)" *ngIf="showInputFile" title="Upload Artefacts">
          <button type="button" class="btn" *ngIf="selectedFiles" (click)="upload()">Upload</button>
          <a  *ngIf="showFile" (click)="downloadfile()">{{uploadedFileName}}</a>
          <button type="button" class="btn" *ngIf="showFile" (click)="delete()">Delete</button>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-5">
        </div>
        <div class="col-md-2">
          <button type="button" class="btn" (click)="submitScore()">Submit</button>
        </div>
        <div class="col-md-5">

        </div>
      </div>
    </div>
  </div>
</ng-template>

<!-- Modal pop up for View Score -->
<ng-template #viewScoreModal let-modal>
  <!-- Modal Header -->
  <div class="modal-header">
    <span class="modal-title">{{viewScoreHeader}}</span>
    <!-- <img class="closebutton" (click)="dismissViewModal()" src="../../../../assets/images/close.png"> -->
    <span class="closebutton glyphicon glyphicon-remove" (click)="dismissViewModal()"></span>
  </div>

  <!-- Modal body -->
  <div *ngIf="loadingSymbolForViewModal" class="loader"></div>
  <div [ngClass]="{'overlay':loadingSymbolForViewModal,'a':!loadingSymbolForViewModal}">
    <div class="modal-body">
      <div class="row rowmarginleft">
        <div class="col-md-3 textnowrap rowdivbackgroundcolor">
          Package Type
        </div>
        <div class="col-md-3">
          {{viewPackageName}}
        </div>
        <div class="col-md-3 textnowrap rowdivbackgroundcolor">
          Site
        </div>
        <div class="col-md-3">
          {{viewFacilityName}}
        </div>
      </div>
      <br />
      <div class="row rowmarginleft">
        <div class="col-md-3 textnowrap rowdivbackgroundcolor">
          Vendor Name
        </div>
        <div class="col-md-3">
          {{viewVendorName}}
        </div>
        <div class="col-md-3 textnowrap rowdivbackgroundcolor">
          Period Picker
        </div>
        <div class="col-md-3">
          {{viewPeriodDate | date : "dd-MMM-yyyy" }}
        </div>
      </div>
      <br />
      <br />
      <div *ngIf="viewScoreDataDisplay?.length>0" class="row modalgridDiv">
        <span class="scoreHeader">Function OLA Score</span>
        <table class="table table-striped table-hover ">
          <thead class="table-header">
            <tr>
              <th class="cansort" (click)="sortingView('FunctionNm')">Function
                <span
                  *ngIf="defaultSortView == false && sortColumnView == 'FunctionNm' && sortDirectionView == 'asc'">▲</span>
                <span
                  *ngIf="defaultSortView == false && sortColumnView == 'FunctionNm' && sortDirectionView == 'desc'">▼</span>
              </th>
              <th class="cansort" (click)="sortingView('frequencyName')">Frequency
                <span *ngIf="sortColumnView == 'frequencyName' && sortDirectionView == 'asc'">▲</span>
                <span *ngIf="sortColumnView == 'frequencyName' && sortDirectionView == 'desc'">▼</span>
              </th>
              <th class="cansort" (click)="sortingView('OLANm')">OLA
                <span *ngIf="sortColumnView == 'OLANm' && sortDirectionView == 'asc'">▲</span>
                <span *ngIf="sortColumnView == 'OLANm' && sortDirectionView == 'desc'">▼</span>
              </th>
              <th>Met</th>
              <th>Not Met</th>
              <th>NA</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngIf="viewScoreDataDisplay?.length<=0">
              <td></td>
              <td></td>
              <td></td>
              <td>No Records found</td>
              <td></td>
              <td></td>
            </tr>
            <ng-container *ngIf="viewScoreDataDisplay?.length>0">
              <tr *ngFor="let item of viewScoreDataDisplay; let i=index">
                <td class="FunctionWidth">{{item.FunctionNm}}</td>
                <td>{{item.frequencyName}}</td>
                <td class="OLAWidth">{{item.OLANm}}</td>
                <td class="textnowrap">
                  <div class="radio radio-primary radio-inline disabled">
                    <input type="radio" id={{i}}met name={{i}}radioInline [(ngModel)]=item.RatingNm value="Met">
                    <label for={{i}}met><span class="screenreader">MET</span></label>
                  </div>
                </td>
                <td class="textnowrap">
                  <div class="radio radio-primary radio-inline disabled">
                    <input type="radio" id={{i}}notmet name={{i}}radioInline1 [(ngModel)]=item.RatingNm value="Not Met">
                    <label for={{i}}notmet><span class="screenreader">NOTMET</span></label>
                  </div>
                </td>
                <td class="textnowrap">
                  <div class="radio radio-primary radio-inline disabled">
                    <input type="radio" id={{i}}na name={{i}}radioInline2 [(ngModel)]=item.RatingNm value="NA">
                    <label for={{i}}na><span class="screenreader">NA</span></label>
                  </div>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
      <div *ngIf="viewScoreDataDisplay?.length>0" class="row modalgridDiv showPageDiv table-footer">
        <div class="col-sm-5 pagination">
          <ul *ngIf="pagerView.pages && pagerView.pages.length" class="pagination" id="viewpaginationtab">
            <li [ngClass]="{disabled:pagerView.currentPage === 1}">
              <a (click)="setPageView(1)">
                <<</a> </li> <li [ngClass]="{disabled:pagerView.currentPage === 1}">
                  <a (click)="setPageView(pagerView.currentPage - 1)">
                    <</a> </li> <li *ngFor="let page of pagerView.pages"
                      [ngClass]="{active:pagerView.currentPage === page}">
                      <a (click)="setPageView(page)">{{page}}</a>
            </li>
            <li [ngClass]="{disabled:pagerView.currentPage === pagerView.totalPages}">
              <a (click)="setPageView(pagerView.currentPage + 1)">></a>
            </li>
            <li [ngClass]="{disabled:pagerView.currentPage === pagerView.totalPages}">
              <a (click)="setPageView(pagerView.totalPages)">>></a>
            </li>
          </ul>
        </div>
        <div class="col-sm-5 pagingOptions">
          <label for="viewddlPageItems" class="labelpagingOptions">Show</label>&nbsp;
          <select id="viewddlPageItems" class="optionddl"  [ngModel]="selectedPageSizeView"
             (ngModelChange)="onPagingOptionsChangeView($event)">
            <option [value]="i" *ngFor="let i of pageOptionsView">{{i}}</option>
          </select>&nbsp;
          entries
        </div>
        <div class="col-sm-2 textnowrap">
          <span class="pagerecordcount">{{pagerView.startIndex + 1}} - {{pagerView.endIndex + 1}} of
            {{pagerView.totalItems}} records </span>
        </div>
      </div>
      <br />
      <br />
      <div *ngIf="viewScoreCard?.length>0">
        <div class="row modalgridDiv alignitemcenter">
          <span>
            <img class="plusIcon" (click)="toggleViewKPIScoreCard()" data-toggle="collapse"
              data-target="#ViewKPIScoreCard" *ngIf="!showViewKPIScoreCard" src="../../../../assets/images/plus.png" alt="click here to open plusIcon">
            <img class="plusIcon" (click)="toggleViewKPIScoreCard()" data-toggle="collapse"
              data-target="#ViewKPIScoreCard" *ngIf="showViewKPIScoreCard" src="../../../../assets/images/minus.png" alt="click here to open plusIcon">
          </span>&nbsp;
          <span class="scoreHeader">KPI Score Card</span>
        </div>
        <div class="row collapse modalgridDiv" id="ViewKPIScoreCard">
          <table class="table table-striped table-hover ">
            <thead class="table-header">
              <tr>
                <th>Balanced ScoreCard Criteria</th>
                <th>Weight</th>
                <th>Actual Score</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngIf="viewScoreCard?.length<=0">
                <td></td>
                <td>No Records found</td>
                <td></td>
              </tr>
              <ng-container *ngIf="viewScoreCard?.length>0">
                <tr *ngFor="let item of viewScoreCard; let i=index">
                  <td>{{item.FunctionNm}}</td>
                  <td>{{item.ScoreWeightage | number : '1.0-2'}}</td>
                  <td>{{item.Score | number : '1.2-2'}}</td>
                </tr>
                <tr>
                  <td colspan="2">Maximum Score</td>
                  <td>5.00</td>
                </tr>
                <tr>
                  <td colspan="2">Total Weightage Score Achieved</td>
                  <td>{{viewTotalWeightageScore | number : '1.2-2'}}</td>
                </tr>
                <tr>
                  <td colspan="2">Percentage Score (%)</td>
                  <td>{{viewTotalWeightageScore/5*100 | number : '1.2-2'}} %</td>
                </tr>
                <tr>
                  <td colspan="2">Penalty applicable for the period</td>
                  <td>{{viewPenalty | number : '1.2-2'}} <span>%</span></td>
                </tr>
              </ng-container>
            </tbody>
          </table>
          <br>
          <div *ngIf="penaltyStructure?.length>0">
            <table class="table table-striped table-hover ">
              <thead class="table-header">
                <tr>
                  <th class="cansort">Total Weightage Score Achieved
                  </th>
                  <th class="cansort">Penalty
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngIf="penaltyStructure?.length<=0">
                  <td></td>
                  <td>No Records found</td>
                </tr>
                <ng-container *ngIf="penaltyStructure?.length>0">
                  <tr *ngFor="let item of penaltyStructure">
                    <td>{{item.MinScore | number : '1.2-2'}} to {{item.MaxScore}}</td>
                    <td>{{item.PenaltyDesc}}</td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <br />
      <br />
      <div *ngIf="viewWCFacilityWise?.length>0">
        <div class="row modalgridDiv alignitemcenter">
          <span>
            <img class="plusIcon" (click)="toggleViewWC()" data-toggle="collapse" data-target="#viewWC"
              *ngIf="!showViewWC" src="../../../../assets/images/plus.png" alt="click here to open plusIcon">
            <img class="plusIcon" (click)="toggleViewWC()" data-toggle="collapse" data-target="#viewWC"
              *ngIf="showViewWC" src="../../../../assets/images/minus.png" alt="click here to open plusIcon">
          </span>&nbsp;
          <span class="scoreHeader">Work Completion</span>
        </div>
        <div class="row collapse modalgridDiv horizontalscroll" id="viewWC">
          <table class="table table-striped table-hover ">
            <thead class="table-header">
              <tr>
                <th colspan="4">Work Completion Certificate</th>
                <th colspan="1"><span class="screenreader">WCC</span></th>
              </tr>
              <tr>
                <th>Cleaning Type</th>
                <th>Target Sqft</th>
                <th>Sqft Achieved</th>
                <th>Unit Price</th>
                <th>Total Price</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of viewWCCertificate; let i=index">
                <td>{{item.CleaningType}}</td>
                <td>{{item.TargetSqft | number : '1.2-2'}}</td>
                <td>{{item.SqftAchieved | number : '1.2-2'}}</td>
                <td>{{item.UnitPrice | number : '1.3-3'}}</td>
                <td>{{item.TotalPrice | number : '1.3-3'}}</td>
              </tr>
            </tbody>
          </table>
          <br />
          <!-- <table class="table table-striped table-hover ">
            <thead class="table-header">
              <tr>
                <th *ngFor='let viewkey of viewWCFacilityWiseKeys'>{{viewkey}}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngIf="viewWCFacilityWise?.length<=0">
                <td></td>
                <td>No Records found</td>
                <td></td>
              </tr>
              <ng-container *ngIf="viewWCFacilityWise?.length>0">
                <tr *ngFor='let item of viewWCFacilityWise'>
                  <td *ngFor='let viewkey of viewWCFacilityWiseKeys'>{{item[viewkey]}}</td>
                </tr>
              </ng-container>
            </tbody>
          </table>-->
          <!-- <div class="horizontalscroll" *ngFor="let wc of viewWCFacilityTowerWise; let i=index">
            <br />
            <table class="table table-striped table-hover">
              <thead class="table-header">
                <tr>
                  <th colspan="9">Tower {{wc.TowerNm}} - Carpet Cleaning Summary</th>
                  <th colspan="1"><span class="screenreader">TWC</span></th>
                  <th><span class="screenreader">TWC</span></th>
                </tr>
                <tr>
                  <th rowspan="5">Tower</th>
                  <th rowspan="5">Floor</th>
                  <th rowspan="5">High Traffic Sqft Area 20%</th>
                  <th rowspan="5">Low Traffic Sqft Area 80%</th>
                  <th>Frequency</th>
                  <td>Daily</td>
                  <td>Weekly</td>
                  <td>Quarterly</td>
                  <td class="textnowrap">Half Yearly</td>
                  <td class="textnowrap">Half Yearly</td>
                  <td>Yearly</td>
                </tr>
                <tr>
                  <th>Traffic</th>
                  <td>High</td>
                  <td>Low</td>
                  <td>High</td>
                  <td>Low</td>
                  <td>High</td>
                  <td>Low</td>
                </tr>
                <tr>
                  <th class="textnowrap">Cleaning Type</th>
                  <td>Vaccuming</td>
                  <td>Vaccuming</td>
                  <td>Encapulisation</td>
                  <td>Encapulisation</td>
                  <td class="textnowrap">Hot Water Extraction</td>
                  <td class="textnowrap">Hot Water Extraction</td>
                </tr>
                <tr>
                  <th>Percentage</th>
                  <td>20%</td>
                  <td>80%</td>
                  <td>20%</td>
                  <td>80%</td>
                  <td>20%</td>
                  <td>80%</td>
                </tr>
                <tr>
                  <th class="textnowrap">Monthly Target</th>
                  <td>{{wc.HighVaccumingTarget | number : '1.2-2'}}</td>
                  <td>{{wc.LowVaccumingTarget | number : '1.2-2'}}</td>
                  <td>{{wc.HighEncapulisationTarget | number : '1.2-2'}}</td>
                  <td>{{wc.LowEncapulisationTarget | number : '1.2-2'}}</td>
                  <td>{{wc.HighHotWaterExtractionTarget | number : '1.2-2'}}</td>
                  <td>{{wc.LowHotWaterExtractionTarget | number : '1.2-2'}}</td>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of wc.TowerDetails; let i=index">
                  <td>{{item.TOWERNm}}</td>
                  <td>{{item.FloorNm}}</td>
                  <td>{{item.High}}</td>
                  <td>{{item.Low}}</td>
                  <td>{{item.Area}}</td>
                  <td>{{item.HighVaccuming}}</td>
                  <td>{{item.LowVaccuming}}</td>
                  <td>{{item.HighEncapulisation}}</td>
                  <td>{{item.LowEncapulisation}}</td>
                  <td>{{item.HighHotWaterExtraction}}</td>
                  <td>{{item.LowHotWaterExtraction}}</td>
                </tr>
              </tbody>
            </table>
          </div> -->
        </div>
      </div>
      <br />
      <br />
      <div class="row">
        <div class="col-md-2">
          Comments
        </div>
        <div class="col-md-10 wordbreak">
          {{viewComments}}
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-2">
          Artefacts
        </div>
        <div class="col-md-10">
            <a (click)="downloadViewfile()">{{viewuploadedFileName}}</a>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<!-- Modal pop up for Approval Score -->
<ng-template #approvalFlowModel let-modal>
  <!-- Modal Header -->
  <div class="modal-header">
    <span class="modal-title">Approval: {{approvalTransactionRefNo}}</span>
    <!-- <img class="closebutton" (click)="dismissApprovalModal()" src="../../../../assets/images/close.png"> -->
    <span class="closebutton glyphicon glyphicon-remove" (click)="dismissApprovalModal()"></span>
  </div>

  <!-- Modal body -->
  <div *ngIf="loadingSymbolForApprovalModal" class="loader"></div>
  <div [ngClass]="{'overlay':loadingSymbolForApprovalModal,'a':!loadingSymbolForApprovalModal}">
    <div class="modal-body">
      <div class="row rowmarginleft">
        <div class="col-md-3 textnowrap rowdivbackgroundcolor">
          Package Type
        </div>
        <div class="col-md-3">
          {{approvalPackageName}}
        </div>
        <div class="col-md-3 textnowrap rowdivbackgroundcolor">
          Site
        </div>
        <div class="col-md-3">
          {{approvalFacility}}
        </div>
      </div>
      <br />
      <div class="row rowmarginleft">
        <div class="col-md-3 textnowrap rowdivbackgroundcolor">
          Vendor Name
        </div>
        <div class="col-md-3">
          {{approvalVendor}}
        </div>
        <div class="col-md-3 textnowrap rowdivbackgroundcolor">
          Period Picker
        </div>
        <div class="col-md-3">
          {{approvalPeriodDate | date : "dd-MMM-yyyy" }}
        </div>
      </div>
      <br />
      <br />
      <div *ngIf="approvalDetails?.length==0" class="row modalgridDiv">
        <span class="boldText"> No Remarks found. </span>
      </div>
      <div *ngIf="approvalDetails?.length>0" class="row modalgridDiv">
        <table class="table table-striped table-hover ">
          <thead class="table-header">
            <tr>
              <th>Role</th>
              <th>Enterprise ID</th>
              <th>Action On</th>
              <th>Comments</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngIf="approvalDetails?.length<=0">
              <td></td>
              <td></td>
              <td class="textnowrap">No Records found</td>
              <td></td>
            </tr>
            <ng-container *ngIf="approvalDetails?.length>0">
              <tr *ngFor="let item of approvalDetails; let i=index">
                <td>{{item.RemarkBy}}</td>
                <td>{{item.UpdatedBy}}</td>
                <td>{{item.UpdatedDttm  | date : "dd-MMM-yyyy"}}</td>
                <td class="FunctionWidth wordbreak">{{item.RemarkDesc}}</td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
    <br />
  </div>


</ng-template>

<!-- <label for="typeahead-basic">Search for a state:</label>
<input id="typeahead-basic" type="text" class="form-control" [ngbTypeahead]="search"/>
<input id="typeahead-basic" type="text" class="form-control" [ngbTypeahead]="search"/>
<ngb-datepicker #dp [(ngModel)]="model" (navigate)="date = $event.next"></ngb-datepicker> -->